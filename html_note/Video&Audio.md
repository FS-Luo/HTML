# Video and Audio content
## 1. web 中的音频和视频
### 1. `<video>` 标签
`<video>` 允许你简单的嵌入一段视频。一个简单的例子如下：
```html
<video src="rabbit320.webm" controls>
    <p>
        你的浏览器不支持 HTML5 视频。可点击
        <a href="rabbit320.mp4">此链接</a> 观看。
    </p>
</video>
```
当中的一些属性如下:  
- `src`   
同 `<img>` 标签中的 `src` 使用方式相同。  
- `controls`  
用户必须能够控制视频和音频的回放功能。你可以使用浏览器提供的控制接口，同时你也可以使用合适的 JavaScript API构建控制接口。至少，这些媒体应该包括开始和停止，以及调整音量的功能。
- `<video>` **标签内的段落**  
这个叫做后备内容 — 当浏览器不支持 `<video>` 标签的时候，它将会显示出来，使我们能够对旧的浏览器做一些兼容处理。你可以添加任何后备内容，在这个例子中我们提供了一个指向这个视频文件的链接，从而使用户可以至少访问到这个文件，而不会局限于浏览器的支持。

### 2. 多格式支持
&emsp;&emsp;MP4、WebM 被称做 **容器格式**。他们是用不同的方式来播放音频或者视频的 —— 也就是说这些容器是用不同的音频轨道、视频轨道、元数据来呈现媒体文件的。不同的浏览器一般会直接播放音频文件，但 **对视频格式的支持不同**。视频和音频都有不同的格式，如下:
- **WebM 容器** 通常包括了 Ogg Vorbis 音频和 VP8/VP9 视频。主要在 FireFox 和 Chrome 当中支持。
- **MP4 容器** 通常包括 AAC 以及 MP3 音频和 H.264 视频。主要在 Internet Explorer 和 Safari 当中支持。  

&emsp;&emsp;以上的格式主要用于将音频和视频压缩成可管理的文件（原始的音频和视频文件非常大）。浏览器包含了不同的 Codecs ，它们用来将已压缩的音频和视频转化成二进制数字。但浏览器并不全支持相同的 codecs，所以你得使用几个不同格式的文件来兼容不同的浏览器。如果你使用的格式都得不到浏览器的支持，那么媒体文件将不会播放。

因此可将上述代码改写为：
```html
<video controls>
    <source src="rabbit320.webm" type="video/webm">
    <source src="rabbit320.mp4" type="video/mp4">
    <p>
        你的浏览器不支持 HTML5 视频。可点击
        <a href="rabbit320.mp4">此链接</a> 观看。
    </p>
</video>
```
&emsp;&emsp;我们将 `src` 属性从 `<video>` 标签中移除，转而将它放在几个单独的标签 `<source>` 当中，浏览器将会检查 `<source>` 标签，并且播放第一个与其自身 codec 相匹配的媒体。你的视频应当包括 WebM 和 MP4 两种格式，这两种在目前已经足够支持大多数平台和浏览器。  
&emsp;&emsp;每个 `<source>` 标签页含有一个 `type` 属性，这个属性是可选的，但是建议你添加上这个属性 — 它包含了视频文件的 MIME types ，同时浏览器也会通过检查这个属性来迅速的跳过那些不支持的格式。如果你没有添加 `type` 属性，浏览器会尝试加载每一个文件，直到找到一个能正确播放的格式，这样会消耗掉大量的时间和资源。

### 3. 其他 `<video>` 特性
- `width` 和 `height`  
你可以用属性控制视频的尺寸，也可以用 CSS 来控制视频尺寸。无论使用哪种方式，视频都会保持它原始的**纵横比**。如果你设置的尺寸没有保持视频原始长宽比，那么视频边框将会拉伸，而未被视频内容填充的部分，将会显示默认的背景颜色。
- `autoplay`  
这个属性会使音频和视频内容立即播放，即使页面的其他部分还没有加载完全。建议不要应用这个属性在你的网站上，因为用户们会比较反感自动播放的媒体文件。
- `loop`  
这个属性可以让音频或者视频文件循环播放。同样不建议使用，除非有必要。
- `muted`  
这个属性会导致媒体播放时，默认关闭声音。
- `poster`  
这个属性指向了一个图像的URL，这个图像会在视频播放前显示。通常用于粗略的预览或者广告。
- `preload`  
这个属性被用来缓冲较大的文件，有3个值可选：
    + `"none"` ：不缓冲
    + `"auto"` ：页面加载后缓存媒体文件
    + `"metadata"` ：仅缓冲文件的元数据

### 4. `<audio>` 标签
&emsp;&emsp;`<audio>` 标签与 `<video>` 标签的使用方式几乎完全相同，有一些细微的差别比如下面的边框不同，一个典型的例子如下：
```html
<audio controls>
    <source src="viper.mp3" type="audio/mp3">
    <source src="viper.ogg" type="audio/ogg">
    <p>
        你的浏览器不支持 HTML5 音频，可点击
        <a href="viper.mp3">此链接</a> 收听。
    </p>
</audio>
```
&emsp;&emsp;音频播放器所占用的空间比视频播放器要小，由于它没有视觉部件，因此只需要显示出能控制音频播放的控件。一些与 HTML5 `<video>` 的差异如下：
- `<audio>` 标签不支持 `width` / `height` 属性 —— 由于其并没有视觉部件，也就没有可以设置 `width` / `height` 的内容。
- 同时也不支持 `poster` 属性 —— 同样，没有视觉部件。

## 2. 显示音轨文本
&emsp;&emsp;许多人不想（或者不能）听到 Web 上的音频/视频内容，至少在某些情况下是这样的。**WebVTT** (Web Video Text Tracks format) 格式能提供一个音频内容的副本。

> WebVTT 是一个格式，用来编写文本文件，这个文本文件包含了众多的字符串。这些字符串会带有一些元数据，可以用来描述这个字符串将会在视频中显示的时间、样式以及定位信息。最常见的如下：
>- subtitle  
>通过添加翻译字幕，来帮助那些听不懂外国语言的人们理解音频当中的内容。
>- captions  
>同步翻译对白，或是描述一些有重要信息的声音，来帮助那些不能听音频的人们理解音频中的内容。
>- timed descriptions  
>将文字转换为音频，用于服务那些有视觉障碍的人。

让其与 HTML 媒体一起显示，你需要做如下工作：
1. 以 .vtt 后缀名保存文件。
2. 用 `<track>` 标签链接 .vtt 文件， `<track>` 标签需放在 `<audio>` 或 `<video>` 标签当中，同时需要放在所有 `<source>` 标签之后。使用 `kind` 属性来指明是哪一种类型，如 subtitles 、 captions 、 descriptions。然后，使用 `srclang` 来告诉浏览器你是用什么语言来编写的，使用 `label` 来规定文本轨道的标签和标题。
例如：
```html
<video controls>
    <source src="example.mp4" type="video/mp4">
    <source src="example.webm" type="video/webm">
    <track kind="subtitles" src="subtitles_en.vtt" srclang="en">
</video>
```